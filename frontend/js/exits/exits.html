<h1 style="font-weight:300;">Exits</h1>

<div style="display:flex; justify-content:flex-end; margin-bottom:15px;">
    <button class="btn" onclick="openExitModal()">Create New Exit</button>
</div>

<div id="exitsContainer" class="card" style="padding:20px;">

    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>Code</th>
                <th>Date</th>
                <th>Destination</th>
                <th>Created By</th>
                <th>Actions</th>
            </tr>

            <!-- FILTER ROW -->
            <tr>
                <th><input id="fltExitID"   class="flt" placeholder="Filter..." oninput="applyExitFilters()"></th>
                <th><input id="fltExitCode" class="flt" placeholder="Filter..." oninput="applyExitFilters()"></th>
                <th><input id="fltExitDate" class="flt" placeholder="Filter..." oninput="applyExitFilters()"></th>
                <th><input id="fltExitDest" class="flt" placeholder="Filter..." oninput="applyExitFilters()"></th>
                <th><input id="fltExitUser" class="flt" placeholder="Filter..." oninput="applyExitFilters()"></th>
                <th></th>
            </tr>
        </thead>

        <tbody id="exitListBody">
            <tr><td colspan="6" style="text-align:center; padding:12px;">Loading...</td></tr>
        </tbody>
    </table>

</div>


<!-- ========================= -->
<!-- ===== EXIT MODAL ======== -->
<!-- ========================= -->
<div id="exitModal" style="
    display:none;
    position:fixed;
    inset:0;
    background:rgba(0,0,0,0.7);
    align-items:center;
    justify-content:center;
    z-index:10;
">
    <!-- MODAL WRAPPER (scrollable) -->
    <div class="modal-box" style="
        width:900px;
        max-width:95%;
        max-height:90vh;
        background:#1e293b;
        padding:20px;
        border-radius:10px;
        overflow-y:auto;
    ">

        <!-- HEADER -->
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:15px;">
            <h2 style="margin:0; font-weight:300;">Exit Details</h2>
            <button class="btn ghost" onclick="closeExitModal()">Close</button>
        </div>

        <!-- TOP FIELDS -->
        <div style="display:grid; grid-template-columns:1fr 200px; gap:12px; margin-bottom:12px;">
            <input id="exitDestination" class="modal-input" placeholder="Destination (required)">
            <input id="exitCreatedBy" class="modal-input" placeholder="User ID (optional)">
        </div>

        <textarea id="exitNotes" class="modal-input"
                  placeholder="Notes (optional)"
                  style="width:100%; height:80px; margin-bottom:12px;"></textarea>

        <!-- ITEMS CARD -->
        <div class="card" style="margin-bottom:15px; padding:15px;">

            <h3 style="margin-top:0; font-weight:300;">Items</h3>

            <!-- Table header inside card -->
            <div style="
                display:flex;
                gap:10px;
                margin-bottom:8px;
                font-weight:600;
                color:#cbd5e1;
                padding:5px 0;
                border-bottom:1px solid #334155;
                text-align:center;
            ">
                <div style="width:90px; display:flex; justify-content:center;">Code</div>
                <div style="flex:1;  display:flex; justify-content:center;">Description</div>
                <div style="width:70px; display:flex; justify-content:center;">Unit</div>
                <div style="width:70px; display:flex; justify-content:center;">Stock</div>
                <div style="width:70px; display:flex; justify-content:center;">Qty</div>
                <div style="width:60px; display:flex; justify-content:center;"></div>
            </div>

            <!-- SCROLLABLE ITEMS LIST -->
            <div id="exitItemsContainer" style="
                max-height:40vh;
                overflow-y:auto;
                padding-right:8px;
            "></div>

            <button class="btn" onclick="addExitItemRow()" style="margin-top:10px;">
                + Add Item
            </button>
        </div>

        <!-- FOOTER (sticky) -->
        <div id="exitModalFooter" style="
            display:flex;
            justify-content:flex-end;
            gap:10px;
            position:sticky;
            bottom:0;
            background:#1e293b;
            padding-top:10px;
        "></div>

    </div>
</div>
